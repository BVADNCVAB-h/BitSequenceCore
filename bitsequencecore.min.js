var BitSequenceCore=function(){var i=this,p=0,q=[];this.getSequence=function(t,r){for(var n=0,o=Math.floor(t/8),e=t%8,i=Math.floor(r/8),u=r%8,f=Math.floor((p-1)/8),a=1,h=i;o<=h;h--){var s=0,c=7,v=0;h<=f&&void 0!==q[h]&&(v=q[h]),h==i&&(c=u),h==o&&(s=e);var l=c-s+1;v>>=8-c-1,v&=(1<<l)-1,v*=a,a*=Math.pow(2,l),n+=v}return n},this.setSequence=function(t,r,n){for(var o,e=Math.floor(t/8),i=t%8,u=Math.floor(r/8),f=r%8,a=Math.floor((p-1)/8),h=1,s=u;e<=s;s--){var c=0,v=7,l=0;s<=a&&void 0!==q[s]&&(l=q[s]),s==u&&(v=f),s==e&&(c=i);var d=v-c+1,g=l,M=l,S=8-c,N=8-v-1;g>>=S,g<<=S,M&=(1<<N)-1;var m=n%(o=h*Math.pow(2,d));m=Math.floor(m/h),m<<=N,h=o,q[s]=g+m+M}return p<r+1&&(p=r+1),!0},this.getIterator=function(){return new function(){var e=0;this.bitsLeft=function(){return p-e},this.hasNext=function(){return e<p},this.getNext=function(t){var r=e,n=e+t-1,o=i.getSequence(r,n);return e=1+n,o},this.setNext=function(t,r){var n=e,o=e+t-1;return i.setSequence(n,o,r),e=1+o,this},this.shift=function(t){return(e+=t)<0&&(e=0),p<e&&(e=p),this}}};function o(t,r,n,o){for(var e,i,u=[],f=-1,a=0,h=-1,s=0,c=0,v=r;;){if(s-=c,v-=c,0==(a-=c))a=n,e=void 0!==t[++f]?t[f]:0;if((0==s||v<=0)&&(0<=h&&(u[h]=i),h++,s=o,i=0),v<=0)break;v<(c=s<a?s:a)&&(c=v);var l=e>>a-c;l&=(1<<c)-1,i+=l<<=s-c}return u}this.toArray=function(t){return void 0===t&&(t=8),o(q,p,8,t)},this.fromArray=function(t,r,n){return isNaN(+r)?null:(void 0===n&&(n=8),q=o(t,r,n,8),p=r,this)},this.toString=function(t){void 0===t&&(t=8);for(var r=[],n=this.toArray(t),o=0;o<n.length;o++)r[o]=String.fromCharCode(n[o]);return r.join("")},this.fromString=function(t,r,n){if(isNaN(+r))return null;void 0===n&&(n=8);for(var o=[],e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return this.fromArray(o,r,n)},this.bitLength=function(){return p}};"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=BitSequenceCore);